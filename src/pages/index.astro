---
import Layout from '../layouts/Layout.astro';
import client from '../lib/microcms';

// microCMSからデータを取得
const data = await client.get({ endpoint: "works" }).catch((err) => console.error(err));
---

<Layout>
  <main class="p-4">
    <h1 class="text-2xl font-bold mb-4">microCMS Connection Test</h1>
    {data && data.contents ? (
      <ul>
        {data.contents.map((content) => (
          <li key={content.id}>{content.title ?? 'No title'}</li>
        ))}
      </ul>
    ) : (
      <p>Could not fetch data from microCMS. Please check your API key, service domain, and if the 'blogs' API exists.</p>
    )}
  </main>
</Layout>
